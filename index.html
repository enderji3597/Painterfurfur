<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>털터를낳아보아요털털슨</title>
    <style>
        body {
            height: 100vh;
            margin: 0;
            overflow: hidden; 
            background-color: white; /* 배경색: 흰색 */
            font-family: 'Malgun Gothic', sans-serif;
            display: flex; /* 버튼 중앙 정렬을 위해 flex 사용 */
            flex-direction: column;
            justify-content: center; /* 수직 중앙 정렬 */
            align-items: center; /* 수평 중앙 정렬 */
        }

        /* 털터 개수 및 리셋 버튼 컨테이너 */
        #control-panel {
            position: absolute;
            top: 15px;
            right: 15px;
            z-index: 20;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        #turter-count {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
        }

        #reset-btn {
            padding: 10px 15px;
            font-size: 1em;
            cursor: pointer;
            background-color: #e74c3c; /* 빨간색 계열 */
            color: white;
            border: none;
            border-radius: 5px;
            box-shadow: 0 3px #c0392b;
        }
        #reset-btn:active {
            box-shadow: 0 1px #c0392b;
            transform: translateY(2px);
        }

        /* 털터 낳기 버튼 스타일 */
        #spawn-turter-btn {
            padding: 25px 50px; /* 버튼 크기 크게 */
            font-size: 2em; /* 글자 크기 크게 */
            cursor: pointer;
            background-color: #3498db; /* 하늘색 */
            color: white; /* 글자색: 하얀색 */
            border: none;
            border-radius: 15px;
            box-shadow: 0 8px #2980b9;
            position: relative; 
            z-index: 10;
        }
        #spawn-turter-btn:active {
            box-shadow: 0 4px #2980b9;
            transform: translateY(4px);
        }

        #game-area {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }

        .turter {
            position: absolute;
            font-size: 1.3em; /* 낳아지는 털터 글자 크기 */
            font-weight: bold;
            color: red; /* 낳아지는 털터 글자색: 빨간색 */
            white-space: nowrap; 
        }
    </style>
</head>
<body>
    
    <div id="control-panel">
        <div id="turter-count">털터 수: 0</div>
        <button id="reset-btn">리셋</button>
    </div>

    <button id="spawn-turter-btn">털터 낳기</button>
    <div id="game-area"></div>

    <script>
        const spawnButton = document.getElementById('spawn-turter-btn');
        const gameArea = document.getElementById('game-area');
        const resetButton = document.getElementById('reset-btn');
        const turterCountDisplay = document.getElementById('turter-count');
        const turterText = '털터';

        const turters = [];
        let turterCounter = 0; // 털터 개수 카운터

        // 털터의 초기 속도 범위 (이전 2~5에서 4~8로 증가하여 더 빠르게 만듦)
        const MIN_SPEED = 4;
        const MAX_SPEED = 8;
        const UPDATE_INTERVAL = 10; // 10ms마다 위치 업데이트

        // 게임 루프 시작
        let gameLoop = setInterval(updateTurters, UPDATE_INTERVAL);

        /**
         * 털터 객체를 생성하고 배열에 추가합니다.
         */
        function spawnTurter() {
            // 버튼의 현재 위치와 크기 정보를 가져옵니다.
            const rect = spawnButton.getBoundingClientRect();
            
            const newTurter = document.createElement('span');
            newTurter.textContent = turterText;
            newTurter.classList.add('turter');
            
            // 초기 위치: 버튼 중앙
            const initialX = rect.left + rect.width / 2 - (newTurter.offsetWidth / 2);
            const initialY = rect.top + rect.height / 2 - (newTurter.offsetHeight / 2);
            
            newTurter.style.left = initialX + 'px';
            newTurter.style.top = initialY + 'px';
            
            gameArea.appendChild(newTurter);

            // 초기 속도 계산: 사방으로 흩어지도록 무작위 속도 부여
            const vxBase = (Math.random() - 0.5) * 2; // -1.0 ~ 1.0
            const vyBase = (Math.random() - 0.5) * 2; // -1.0 ~ 1.0
            const speedFactor = Math.random() * (MAX_SPEED - MIN_SPEED) + MIN_SPEED;
            
            // 속도의 크기를 일정 범위 내로 유지하며 방향만 랜덤으로 설정
            const turterData = {
                element: newTurter,
                x: initialX,
                y: initialY,
                vx: vxBase * speedFactor,
                vy: vyBase * speedFactor,
                // 주의: offsetWidth/Height는 DOM에 추가된 후에야 정확한 값이 나옵니다.
                width: newTurter.offsetWidth, 
                height: newTurter.offsetHeight
            };

            turters.push(turterData);
            turterCounter++;
            turterCountDisplay.textContent = `털터 수: ${turterCounter}`;
        }
        
        spawnButton.addEventListener('click', spawnTurter);


        /**
         * 모든 털터의 위치를 업데이트하고 충돌을 감지합니다.
         */
        function updateTurters() {
            const screenWidth = window.innerWidth;
            const screenHeight = window.innerHeight;

            for (let i = turters.length - 1; i >= 0; i--) {
                const t = turters[i];
                
                // 1. 위치 업데이트
                t.x += t.vx;
                t.y += t.vy;

                // 2. 가로 경계 충돌 감지 및 반사
                if (t.x + t.width > screenWidth || t.x < 0) {
                    t.vx *= -1; 
                    // 경계 안으로 위치 조정 (튕긴 후 밖으로 나가는 것 방지)
                    if (t.x < 0) t.x = 0;
                    if (t.x + t.width > screenWidth) t.x = screenWidth - t.width;
                }

                // 3. 세로 경계 충돌 감지 및 반사
                if (t.y + t.height > screenHeight || t.y < 0) {
                    t.vy *= -1; 
                    // 경계 안으로 위치 조정
                    if (t.y < 0) t.y = 0;
                    if (t.y + t.height > screenHeight) t.y = screenHeight - t.height;
                }

                // 4. CSS 스타일 업데이트
                t.element.style.left = t.x + 'px';
                t.element.style.top = t.y + 'px';
            }
        }
        
        /**
         * 게임 상태를 초기화합니다.
         */
        function resetGame() {
            // 모든 털터 DOM 요소 제거
            turters.forEach(t => t.element.remove());
            
            // 털터 데이터 배열 초기화
            turters.length = 0;
            
            // 카운터 초기화 및 표시 업데이트
            turterCounter = 0;
            turterCountDisplay.textContent = `털터 수: ${turterCounter}`;
        }
        
        resetButton.addEventListener('click', resetGame);
        
    </script>
</body>
</html>
